# smartScheduling
----------------------
## 此為 110 年 AIGO 解題賽之解題賽題目，福佑電機股份有限公司-智慧規劃排程，解題團隊 CKC
https://aigo.org.tw/zh-tw/competitions/details/379
### 解題內容
少量多樣已是現在訂單的常態，對產線來說，若頻繁換線已不可避免，如何將生產排程最佳化，對生產效率與品質會有很大的影響。公司目前雖有ERP系統，但排程上仍仰賴人工作業，排程先後考慮的因素包括：客戶交期、進料日期、產能、機種切換耗時…等因素，還有插單、急單要考慮，常常其中一項因素變動後要重排時需要花費許多時間，希望能運用人工智慧技術協助排程規劃，能快速、有彈性的產生最佳排程。

(本系統程式碼已將敏感資訊內容與檔案刪除)
以下為部分目標與限制:
1. 目標為 **換線時間最短**
2. 每次排程 **五** 週
3. 加班上限每週 **九** 小時

### demo 影片
[![CKCx福佑電機xAIGO](https://user-images.githubusercontent.com/36625741/136771412-93b78223-72a8-4f86-b55d-bfb130485183.jpg)](https://youtu.be/PDrgGvqH_4c)

### 智慧規劃排程系統主要包含
一項資料前置作業
* 0.setupTime：將廠商提供換線時間表進行轉換以供自動化比對使用

兩項排程作業
* 1.generateForm：輸入排程日期。部分資料無法藉由自動化方式取得，如**每日可用工時**、**補正工時**、**預定加班工時**、**特殊訂單製造工班**，透過此模組產生一待填表單，供廠商填寫修改工班產能與特性。

<img width="861" alt="image" src="https://user-images.githubusercontent.com/36625741/136733421-aab9df97-77dc-4fc0-acc2-74c7c2f53917.png">
待填表單示意圖

每日工時依照政府開放資料平臺中，透過**中華民國政府行政機關辦公日曆表**中的開放資料(國定假日、補休、補班等)作為是否上班依據
https://data.gov.tw/dataset/14718

* 2.scheduler：
  分為以下階段：
  * 讀取待填表單，進行資料轉換
  * 各製令單嵌入必要資訊，如單位生產時間、計算所需生產時間、類別等
  * 依據製令單特性，考量廠商生產限制進行製令單分群
  * 依據工班特性，分配可進行製令單群
  * 經客制進化式演算法進行智慧規劃排程
  * 輸出連續五週排程表
<img width="740" alt="image" src="https://user-images.githubusercontent.com/36625741/136735157-9954396e-44ce-474c-a2fe-d4b71d98d35c.png">
輸出排程表範例

  * 經客制進化式演算法進行智慧規劃排程

<img width="703" alt="image" src="https://user-images.githubusercontent.com/36625741/136735588-2f017624-7603-4645-b996-8c0ba91e101f.png">
